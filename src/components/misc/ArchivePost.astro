---
import I18nKeys from "../../locales/keys";
import { i18n } from "../../locales/translation";

import { formatDate } from "../../utils/date";
import aoyukiConfig from "../../../aoyuki.config";

export interface Props {
	id: string;
	title: string;
	pubilished: Date;
	show_month?: boolean;
	tags: string[] | undefined;
}

const { id, title, pubilished, show_month, tags } = Astro.props;
const month_shorthands = [
	I18nKeys.date_month_shorthand_january,
	I18nKeys.date_month_shorthand_february,
	I18nKeys.date_month_shorthand_march,
	I18nKeys.date_month_shorthand_april,
	I18nKeys.date_month_shorthand_may,
	I18nKeys.date_month_shorthand_june,
	I18nKeys.date_month_shorthand_july,
	I18nKeys.date_month_shorthand_august,
	I18nKeys.date_month_shorthand_september,
	I18nKeys.date_month_shorthand_october,
	I18nKeys.date_month_shorthand_november,
	I18nKeys.date_month_shorthand_december,
];
const months = [
	I18nKeys.date_month_january,
	I18nKeys.date_month_february,
	I18nKeys.date_month_march,
	I18nKeys.date_month_april,
	I18nKeys.date_month_may,
	I18nKeys.date_month_june,
	I18nKeys.date_month_july,
	I18nKeys.date_month_august,
	I18nKeys.date_month_september,
	I18nKeys.date_month_october,
	I18nKeys.date_month_november,
	I18nKeys.date_month_december,
];
---

<div class="item">
  <a
    href={id}
    class="flex w-full select-none flex-row items-center rounded-md py-2 transition-colors hover:bg-[var(--primary-color-lighten)]"
  >
    <div class="flex w-[15%] flex-row justify-end md:w-[12%] md:-mr-[2%]">
      <p class="date text-sm text-[var(--text-color-lighten)]">
        {show_month ? <b>{i18n(months[pubilished.getMonth()])}&nbsp;</b> : <>|</>} {pubilished.getDate()}
      </p>
    </div>
    <div class="dash-line relative flex h-full w-[15%] items-center md:w-[10%]">
      <div
        class="tl-dot item-dot z-50 mx-auto h-1 w-1 rounded bg-[var(--text-color-lighten)] outline outline-4 outline-[var(--card-color)] transition-all"
      >
      </div>
    </div>
    <div class="flex w-[70%] flex-row md:w-[80%]">
      <p
        class="title truncate font-semibold text-[var(--text-color)] transition-all"
      >
        {title}
      </p>
    </div>
  </a>

  <style>
    .date {
      font-family: var(--primary-font);
    }

    .title {
      font-family: var(--primary-font);
    }

    .item:hover .title {
      @apply pl-2 text-[var(--primary-color)];
    }

    .dash-line::before {
      @apply absolute top-1/2 h-[40px] w-[10%] -translate-y-1/2 border-l-2 border-dashed border-l-[var(--text-color)] opacity-25 content-[''];
      left: calc(50% - 1px);
    }

    .item:hover .tl-dot {
      @apply h-6 bg-[var(--primary-color)] outline-[var(--primary-color-lighten)];
    }
  </style>
</div>
